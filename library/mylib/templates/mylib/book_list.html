{% extends 'mylib/base.html' %}

{% block body %}
<table class="table">
    <thead class="table table-hover">
      <tr>
          <th>Book title
              <a href="?order_by=title" class="fa fa-fw fa-sort-up"></a>
          </th>
          <th>Year<a href="?order_by=year" class="fa fa-fw  fa-sort-up"></a></th>
          <th>Authors<a href="?order_by=authors__second_name" class="fa fa-fw  fa-sort-up"></a></th>
          <th>Genres</th>
      </tr>
    </thead>
    <tbody>
      {% for book in object_list %}
        <tr>
            <td class="align-middle">
                <a href="{% url 'book_info' book.pk %}">{{ book.title }}</a>
            </td>
            <td class="align-middle">
                {{ book.year }}
            </td>
            <td>
                <ul class="list-unstyled">
                    {% for author in book.authors.all %}
                    <li><a href="{% url 'author_info' author.pk %}">{{ author.short_name }}</a></li>
                    {% endfor %}
                </ul>
            </td>
            <td>
                <ul class="list-unstyled">{% for g in book.genre.all|slice:"0:3" %}<li>{{ g.name }}</li>{% endfor %}</ul>
            </td>
        </tr>
      {% endfor %}
    </tbody>
</table>

{% include 'mylib/pagination.html' %}

{% endblock %}